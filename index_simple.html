<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<header class="logo">
    <img src="https://steigerlegal.ch/wp-content/uploads/2019/09/kanton-zuerich_logo_002.jpg" width="150">
    <center><h1 class="title">Bildungszentrum Zürichsee</h1></center>
</header>

<h1>Data from MySQL Table</h1>

<div id="data-container">
    <!-- The fetched data will be displayed here -->
    <p>Vorname: <span id="vorname"></span></p>
    <p>Nachname: <span id="nachname"></span></p>
    <p>Klasse: <span id="klasse"></span></p>
    <button onclick="deleteSchueler()">Schüler löschen</button>
</div>

<script>
    function deleteSchueler() {
        const urlParams = new URLSearchParams(window.location.search);
        const schuelerId = urlParams.get('schueler');
        if (!schuelerId) {
            console.error('No schueler ID provided');
            return;
        }

        fetch(`http://localhost:3000/schueler/${schuelerId}`, {
            method: 'DELETE'
        })
            .then(response => {
                if (response.ok) {
                    console.log('Schueler deleted successfully');
                    // Optionally, redirect to another page or update UI as needed
                } else {
                    console.error('Error deleting schueler');
                    // Handle error response
                }
            })
            .catch(error => console.error('Error deleting schueler:', error));
    }

    // Function to fetch and display schueler data
    function fetchDataById(id) {
        fetch(`http://localhost:3000/schueler/${id}`)
            .then(response => response.json())
            .then(data => {
                const schueler = data[0];
                document.getElementById('vorname').textContent = schueler.vorname;
                document.getElementById('nachname').textContent = schueler.nachname;
                document.getElementById('klasse').textContent = schueler.klasse;
            })
            .catch(error => console.error('Error fetching data:', error));
    }

    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const schuelerId = urlParams.get('schueler');

        if (schuelerId) {
            fetchDataById(schuelerId);
        } else {
            // Default behavior if no schueler ID is provided
            fetchDataById(1); // Assuming default schueler ID
        }
    });
</script>

</body>
</html>
